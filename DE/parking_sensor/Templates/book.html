{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" href="{% static 'img/favicon.ico' %}" type="image/x-icon">
    <title>Booking</title>

    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans|Raleway|Candal">
    <link rel="stylesheet" type="text/css" href="{% static 'css/font-awesome.min.css'%}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css'%}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/book.css'%}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/style.css'%}">
</head>

<body id="page-top">

	<!--banner-->
     <section class="section section-padding" style="background-color: RGBA(13, 70, 83, 0.78)">
        <div>
            <nav class="navbar navbar-default navbar-fixed-top">
                <div class="container">
                    <div class="col-md-12">
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
							<a class="navbar-brand" href="#"><img src="{% static 'img/logo.png'%}" class="img-responsive" style="margin-top: -7px;"></a>
                        </div>
                        <div class="collapse navbar-collapse navbar-right" id="myNavbar">
                            <ul class="nav navbar-nav">
                                <li class=""><a href="{% url 'home'%}">Home</a></li>
                                <li class=""><a href="{% url 'preview'%}">Availiblty</a></li>
                                <li class="active"><a href="#book">Booking</a></li>
                                <li class=""><a href="{% url 'home'%}#contact">Contact</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
    </section>
    <!--/ banner-->

	<section id="book" class="section-padding">
		<div class="container">
			<section class="screen">
				<div class="header" style="justify-content: center">
					<div class="info">
						<span class="message">
							<circle cx='10' cy='15' r='10' fill='#08B4E8'/>
							Available
						</span>
					</div>

					<div class="info" style="margin-left:10px;">
						<span class="message">
							<svg xmlns='http://www.w3.org/2000/svg' width='30' height='30' style="padding-right:7px;"><circle cx='10' cy='15' r='10' fill='#f6d465'/></svg>
							Reserved
						</span>
					</div>

					<div class="info" style="margin-left:10px;">
						<span class="message">
							<svg xmlns='http://www.w3.org/2000/svg' width='30' height='30' style="padding-right:7px;"><circle cx='10' cy='15' r='10' fill='#c6584b'/></svg>
							Occupied
						</span>
					</div>
				</div>
			</section>
			<section class="screen section-padding">
				<div class="parking">
					<a id="1" class="space available" onclick="reserve(this.id)">
						<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="48" viewBox="0 0 24 24" width="48">
							<path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>
							<path d="M0 0h24v24H0z" fill="none"/>
						</svg>
						<span id="output-1" style="display:none;position:absolute;bottom:-30px">Pin Val=0</span>
						<span id="parkit-message-1" class="parkit-message">Book</span>
						<span class="space-id">Space A</span>
					</a>
					<a id="2" class="space occupied" onclick="reserve(this.id)">
						<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="48" viewBox="0 0 24 24" width="48">
							<path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>
							<path d="M0 0h24v24H0z" fill="none"/>
						</svg>
						<span id="output-2" style="display:none;position:absolute;bottom:-30px">Pin Val=0</span>
						<span id="parkit-message-2" class="parkit-message">Booked</span>
						<span class="space-id">Space B</span>
					</a>
					<a id="3" class="space available" onclick="reserve(this.id)">
						<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="48" viewBox="0 0 24 24" width="48">
							<path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>
							<path d="M0 0h24v24H0z" fill="none"/>
						</svg>
						<span id="output-3" style="display:none;position:absolute;bottom:-30px">Pin Val=0</span>
						<span id="parkit-message-3" class="parkit-message">Book</span>
						<span class="space-id">Space C</span>
					</a>
					<a id="4" class="space available" onclick="reserve(this.id)">
						<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="48" viewBox="0 0 24 24" width="48">
							<path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>
							<path d="M0 0h24v24H0z" fill="none"/>
						</svg>
						<span id="output-4" style="display:none;position:absolute;bottom:-30px">Pin Val=0</span>
						<span id="parkit-message-4" class="parkit-message">Book</span>
						<span class="space-id">Space D</span>
					</a>
				</div>
			</section>

			<script>
				var on = "Pin Val=1";
				var off = "Pin Val=0";
				function park(id,index){
					var plot = document.getElementById(index).classList;
					if(!(plot.contains("in-route")))
					{
						digitalRead(id,'output-'+index);
					}
					var x = document.getElementById('output-'+index).innerHTML;
					if(x==on)
					{
						var space = document.getElementById(index).classList;
						space.remove("available");
						space.add("occupied");
						document.getElementById('parkit-message-'+index).innerHTML = "Occupied";
					}
					else if(x==off)
					{
						var space = document.getElementById(index).classList;
						space.remove("occupied");
						document.getElementById('parkit-message-'+index).innerHTML = "Book";
						if(!space.contains("in-route")){
							space.add("available");
						}
					}
				}
				(function(){
					var index = 1,id = 1;
					park(id,index);
					setTimeout(arguments.callee, 3000);
				})();
				(function(){
					var index = 2,id = 2;
					park(id,index);
					setTimeout(arguments.callee, 3000);
				})();
				(function(){
					var index = 3,id = 3;
					park(id,index);
					setTimeout(arguments.callee, 3000);
				})();
				(function(){
					var index = 4,id = 4;
					park(id,index);
					setTimeout(arguments.callee, 3000);
				})();
				function setIntervalX(callback, delay, repetitions) {
					var x = 0;
					var intervalID = window.setInterval(function () {
						callback();
						if (++x === repetitions) {
							window.clearInterval(intervalID);
						}
					}, delay);
				}
				function reserve(clicked_id){
					var space = document.getElementById(clicked_id).classList;
					if(space.contains("occupied")||space.contains("in-route")){
						alert("Already Occupied");
					}
					else{
						document.getElementById('parkit-message-'+clicked_id).innerHTML = "Waiting";
						space.remove("available");
						space.add("in-route");
					}
					var i=1,flag=0;
					setIntervalX(function () {
						digitalRead(clicked_id,'output-'+clicked_id);
						var status = document.getElementById('output-'+clicked_id).innerHTML;
						var space = document.getElementById(clicked_id).classList;
						if(space.contains("in-route")){
							if(status==on)
							{
								space.add("occupied");
								space.remove("in-route");
								flag=1;
							}
						}
					}, 3000, 5);
					setTimeout(function reset(){
						if(flag==0){
							console.log("Test");
							space.remove("in-route");
							space.add("available");
							document.getElementById('parkit-message-'+clicked_id).innerHTML = "Book";
						}
					},15000);
				}
			</script>
		</style>

	</section>

	<!--footer-->
    <footer id="footer">
        <div class="top-footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-4 col-sm-4 marb20">
                        <div class="ftr-tle">
                            <h4 class="white no-padding">About Us</h4>
                        </div>
                        <div class="info-sec">
                            <p>A Friend for those people who miss first 10 mins of movie or has to walk long way to park vehicles, probably alone.</p>
                            <h3 style="color: white">Shout out to all those, We are here for you!</h3>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-4 marb20">
                        <div class="ftr-tle">
                          <h4 class="white no-padding">Quick Links</h4>
                        </div>
                        <div class="info-sec">
                            <ul class="quick-info">
                                <li><a href="{% url 'admin:index'%}"><i class="fa fa-circle"></i>Admin</a></li>
                                <li><a href="{% url 'login'%}"><i class="fa fa-circle"></i>Login</a></li>
                                <li><a href="{% url 'data'%}"><i class="fa fa-circle"></i>Data</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-4 marb20">
                        <div class="ftr-tle">
                            <h4 class="white no-padding">Follow us</h4>
                        </div>
                        <div class="info-sec">
                            <ul class="social-icon">
                                <li class="bglight-blue"><a target="_blank" href="http://www.facebook.com" class="fa fa-facebook" style="color: white;"></a></li>
                                <li class="bgred"><a target="_blank" href="http://www.google.com" class="fa fa-google-plus" style="color: white;"></a></li>
                                <li class="bgdark-blue"><a target="_blank" href="http://www.linkedin.com" class="fa fa-linkedin" style="color: white;"></a></li>
                                <li class="bglight-blue"><a target="_blank" href="http://www.twitter.com" class="fa fa-twitter" style="color: white;"></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--/ footer-->

    <script src="{% static 'js/jquery.min.js'%}"></script>
    <script src="{% static 'js/jquery.easing.min.js'%}"></script>
    <script src="{% static 'js/bootstrap.min.js'%}"></script>
	<script src="{% static 'js/custom.js'%}"></script>
	<script src="{% static 'js/book.js'%}"></script>

</body>

</html>
